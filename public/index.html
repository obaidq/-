<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="theme-color" content="#162d4a">
  <title>Ø£Ø¨Ùˆ Ø¹Ø§Ø¨Ø¯ Ø¨ÙˆÙƒØ³ ğŸ®</title>
  <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ğŸ§”ğŸ»</text></svg>">
  <link href="https://fonts.googleapis.com/css2?family=Rubik:wght@400;500;600;700;800;900&family=Tajawal:wght@400;500;700;800;900&family=Bangers&display=swap" rel="stylesheet">
  <script src="/socket.io/socket.io.js"></script>
  <link rel="stylesheet" href="/css/tokens.css">
  <link rel="stylesheet" href="/css/components.css">
  <link rel="stylesheet" href="/css/layout.css">
  <link rel="stylesheet" href="/css/patterns.css">
  <style>
    .logo-container{display:flex;flex-direction:column;align-items:center;gap:16px}
    .mascot{font-size:100px;filter:drop-shadow(4px 4px 0 rgba(0,0,0,0.5));animation:mascot-bounce 2s ease-in-out infinite}
    @keyframes mascot-bounce{0%,100%{transform:translateY(0) rotate(-5deg)}50%{transform:translateY(-20px) rotate(5deg)}}
    .logo{display:flex;align-items:center;gap:16px;flex-wrap:wrap;justify-content:center}
    .logo__box{background:linear-gradient(135deg,#FFD93D,#FF8C42);color:#000;padding:16px 32px;font-size:48px;font-weight:900;font-family:'Tajawal',sans-serif;border:6px solid #000;border-radius:16px;box-shadow:8px 8px 0 #000;transform:rotate(-3deg)}
    .logo__name{font-size:56px;font-weight:900;font-family:'Tajawal',sans-serif;color:#fff;text-shadow:4px 4px 0 #000,-2px -2px 0 #000,2px -2px 0 #000,-2px 2px 0 #000;transform:rotate(2deg)}
    .tagline{font-size:20px;color:var(--color-accent-yellow);text-shadow:2px 2px 0 rgba(0,0,0,0.5);margin-top:8px}
    .menu-actions{display:flex;flex-direction:column;gap:20px;max-width:380px;width:100%;margin-top:40px}
    .boot-tip{position:fixed;bottom:100px;left:50%;transform:translateX(-50%);background:rgba(0,0,0,0.6);padding:16px 32px;border-radius:50px;font-size:18px;color:var(--color-accent-yellow);border:2px solid rgba(255,217,61,0.3);max-width:90%;text-align:center}
    .saudi-footer{position:fixed;bottom:24px;left:50%;transform:translateX(-50%);display:flex;align-items:center;gap:12px;background:linear-gradient(135deg,rgba(0,100,0,0.4),rgba(0,60,0,0.6));padding:12px 28px;border-radius:50px;border:2px solid rgba(0,180,0,0.4);font-size:14px;color:#90EE90}
    .room-display{background:#fff;border:6px solid #000;border-radius:20px;padding:24px 48px;box-shadow:8px 8px 0 #000;text-align:center}
    .room-display__label{font-size:14px;color:#666;text-transform:uppercase;letter-spacing:2px;margin-bottom:8px}
    .room-display__code{font-size:64px;font-weight:900;font-family:'Bangers','Rubik',sans-serif;letter-spacing:12px;color:#2a4a73}
    .room-display__url{font-size:14px;color:#E91E8C;margin-top:8px}
    .games-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:24px;max-width:1200px;margin:0 auto;padding:0 16px}
    .game-card{background:#fff;border-radius:20px;overflow:hidden;cursor:pointer;box-shadow:0 10px 30px rgba(0,0,0,0.3);transition:transform 0.2s;border:4px solid transparent}
    .game-card:hover{transform:translateY(-8px) scale(1.02);border-color:#FFD93D}
    .game-card__banner{height:140px;display:flex;align-items:center;justify-content:center}
    .game-card__icon{font-size:64px;transition:transform 0.3s}
    .game-card:hover .game-card__icon{transform:scale(1.2) rotate(-10deg)}
    .game-card__content{padding:20px;text-align:right}
    .game-card__title{font-size:22px;font-weight:900;color:#1a1a1a;margin-bottom:8px}
    .game-card__desc{font-size:13px;color:#666;margin-bottom:12px;line-height:1.5}
    .game-card__tags{display:flex;gap:6px;justify-content:flex-end;flex-wrap:wrap}
    .game-tag{background:#f0f0f0;padding:4px 10px;border-radius:20px;font-size:11px;font-weight:600;color:#444}
    .players-area{display:flex;flex-wrap:wrap;gap:16px;justify-content:center;padding:16px}
    .player-avatar{display:flex;flex-direction:column;align-items:center;gap:6px;padding:12px;border-radius:12px;background:rgba(255,255,255,0.1);border:3px solid transparent;min-width:90px}
    .player-avatar--ready{border-color:#00e676;background:rgba(0,230,118,0.1)}
    .player-avatar__face{width:60px;height:60px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:32px;border:4px solid #000;box-shadow:3px 3px 0 #000;position:relative}
    .player-avatar__crown{position:absolute;top:-14px;right:-6px;font-size:20px}
    .player-avatar__name{font-size:14px;font-weight:700;color:#fff}
    .player-avatar__score{font-size:12px;color:#FFD93D}
    .game-timer{width:80px;height:80px;background:#FFD93D;border:5px solid #000;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:36px;font-weight:900;font-family:'Bangers',sans-serif;color:#000;box-shadow:4px 4px 0 #000}
    .game-timer--warning{background:#FF8C42;animation:shake 0.5s ease infinite}
    .game-timer--danger{background:#ff4444;color:#fff;animation:shake 0.2s ease infinite}
    @keyframes shake{0%,100%{transform:rotate(-3deg)}50%{transform:rotate(3deg)}}
    .how-steps{display:flex;flex-direction:column;gap:12px}
    .how-step{display:flex;align-items:center;gap:16px;padding:16px;background:rgba(255,255,255,0.1);border-radius:12px}
    .how-step__num{width:44px;height:44px;background:#FFD93D;color:#000;border:4px solid #000;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:20px;font-weight:900;flex-shrink:0}
    .how-step__text{font-size:16px}
    .percent-display{font-size:72px;font-weight:900;font-family:'Bangers',sans-serif;color:#00d4ff;text-shadow:4px 4px 0 #000}
    .slider-track{-webkit-appearance:none;width:100%;height:20px;background:linear-gradient(90deg,#ff4444,#ffaa00,#44ff44);border-radius:10px;border:4px solid #000}
    .slider-track::-webkit-slider-thumb{-webkit-appearance:none;width:44px;height:44px;background:#fff;border:4px solid #000;border-radius:50%;cursor:grab;box-shadow:3px 3px 0 #000}
    .vote-option{background:#fff;border:4px solid #000;border-radius:14px;padding:20px 28px;cursor:pointer;transition:all 0.2s;min-width:260px;box-shadow:5px 5px 0 #000}
    .vote-option:hover{transform:translate(-3px,-3px);box-shadow:8px 8px 0 #000}
    .vote-option--selected{border-color:#00e676;background:#e8f5e9}
    .vote-option__text{font-size:18px;font-weight:700;color:#1a1a1a;text-align:center}
    .scoreboard{background:rgba(0,0,0,0.8);border:4px solid #FFD93D;border-radius:16px;padding:20px;max-width:450px;width:100%}
    .scoreboard__row{display:flex;justify-content:space-between;align-items:center;padding:12px;border-radius:10px;margin-bottom:6px}
    .scoreboard__row:first-child{background:linear-gradient(90deg,rgba(255,217,61,0.3),transparent)}
    @media(max-width:768px){.logo__box{font-size:28px;padding:10px 20px}.logo__name{font-size:36px}.mascot{font-size:60px}.room-display__code{font-size:40px;letter-spacing:6px}.games-grid{grid-template-columns:1fr}.game-timer{width:60px;height:60px;font-size:28px}}
  </style>
</head>
<body data-theme="hub">
  <div class="bg"><div class="bg__pattern pattern-rays"></div><div class="bg__overlay"></div></div>

  <div id="bootScreen" class="screen screen--centered is-active">
    <div class="logo-container"><div class="mascot">ğŸ§”ğŸ»</div><div class="logo"><span class="logo__box">Ø£Ø¨Ùˆ Ø¹Ø§Ø¨Ø¯</span><span class="logo__name">Ø¨ÙˆÙƒØ³</span></div></div>
    <div class="spinner mt-8"></div>
    <div class="boot-tip" id="bootTip">ğŸ’¡ Ø§Ù„ÙƒØ°Ø¨ ÙÙŠ Ø§Ù„Ù„Ø¹Ø¨... ÙÙ†! ğŸ­</div>
  </div>

  <div id="menuScreen" class="screen screen--centered">
    <div class="logo-container"><div class="mascot">ğŸ§”ğŸ»</div><div class="logo"><span class="logo__box">Ø£Ø¨Ùˆ Ø¹Ø§Ø¨Ø¯</span><span class="logo__name">Ø¨ÙˆÙƒØ³</span></div><p class="tagline">ğŸ‡¸ğŸ‡¦ Ø£Ù„Ø¹Ø§Ø¨ Ø¬Ù…Ø§Ø¹ÙŠØ© Ø³Ø¹ÙˆØ¯ÙŠØ© â€¢ Ø§Ù„Ø¹Ø¨ Ù…Ø¹ Ø±Ø¨Ø¹Ùƒ!</p></div>
    <div class="menu-actions">
      <button class="btn btn--primary btn--lg btn--full" onclick="App.showScreen('createScreen')">ğŸ  Ø£Ù†Ø´Ø¦ ØºØ±ÙØ©</button>
      <button class="btn btn--secondary btn--lg btn--full" onclick="App.showScreen('joinScreen')">ğŸšª Ø§Ù†Ø¶Ù… Ù„ØºØ±ÙØ©</button>
      <button class="btn btn--ghost btn--full" onclick="App.showScreen('howToPlayScreen')">â“ ÙƒÙŠÙ Ø£Ù„Ø¹Ø¨ØŸ</button>
    </div>
    <div class="saudi-footer"><span>ğŸ‡¸ğŸ‡¦</span><span>ØµÙ†Ø¹ ÙÙŠ Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ© Ø¨ÙƒÙ„ Ø­Ø¨</span></div>
  </div>

  <div id="createScreen" class="screen screen--centered">
    <div class="panel" style="max-width:450px;width:100%">
      <div class="text-center mb-6"><span style="font-size:50px">ğŸ </span><h2 class="text-2xl font-black mt-2">Ø£Ù†Ø´Ø¦ ØºØ±ÙØ©</h2></div>
      <div class="mb-4"><label class="text-sm text-muted mb-1 block">Ø§Ø³Ù…Ùƒ</label><input type="text" id="hostNameInput" class="input" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ø³Ù…Ùƒ..." maxlength="12"></div>
      <button class="btn btn--primary btn--lg btn--full mb-3" onclick="App.createRoom()">ÙŠÙ„Ø§ Ù†Ø¨Ø¯Ø£! ğŸ‰</button>
      <button class="btn btn--ghost btn--full" onclick="App.showScreen('menuScreen')">â† Ø±Ø¬ÙˆØ¹</button>
    </div>
  </div>

  <div id="joinScreen" class="screen screen--centered">
    <div class="panel" style="max-width:450px;width:100%">
      <div class="text-center mb-6"><span style="font-size:50px">ğŸšª</span><h2 class="text-2xl font-black mt-2">Ø§Ù†Ø¶Ù… Ù„ØºØ±ÙØ©</h2></div>
      <div class="mb-4"><label class="text-sm text-muted mb-1 block">ÙƒÙˆØ¯ Ø§Ù„ØºØ±ÙØ©</label><input type="text" id="roomCodeInput" class="input input--code" placeholder="ABCD" maxlength="4" oninput="this.value=this.value.toUpperCase().replace(/[^A-Z]/g,'')"></div>
      <div class="mb-4"><label class="text-sm text-muted mb-1 block">Ø§Ø³Ù…Ùƒ</label><input type="text" id="playerNameInput" class="input" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ø³Ù…Ùƒ..." maxlength="12"></div>
      <button class="btn btn--primary btn--lg btn--full mb-3" onclick="App.joinRoom()">Ø§Ù†Ø¶Ù…! ğŸ®</button>
      <button class="btn btn--ghost btn--full" onclick="App.showScreen('menuScreen')">â† Ø±Ø¬ÙˆØ¹</button>
    </div>
  </div>

  <div id="howToPlayScreen" class="screen screen--centered">
    <div class="panel" style="max-width:500px;width:100%">
      <div class="text-center mb-4"><span style="font-size:50px">â“</span><h2 class="text-2xl font-black mt-2">ÙƒÙŠÙ Ø£Ù„Ø¹Ø¨ØŸ</h2></div>
      <div class="how-steps">
        <div class="how-step"><span class="how-step__num">1</span><span class="how-step__text">Ø£Ù†Ø´Ø¦ ØºØ±ÙØ© Ø£Ùˆ Ø§Ù†Ø¶Ù… Ù„ØºØ±ÙØ© ØµØ§Ø­Ø¨Ùƒ</span></div>
        <div class="how-step"><span class="how-step__num">2</span><span class="how-step__text">Ø´Ø§Ø±Ùƒ Ø§Ù„ÙƒÙˆØ¯ Ù…Ø¹ Ø£ØµØ¯Ù‚Ø§Ø¦Ùƒ</span></div>
        <div class="how-step"><span class="how-step__num">3</span><span class="how-step__text">Ø§Ø®ØªØ§Ø±ÙˆØ§ Ù„Ø¹Ø¨Ø© Ù…Ù† 6 Ø£Ù„Ø¹Ø§Ø¨</span></div>
        <div class="how-step"><span class="how-step__num">4</span><span class="how-step__text">Ø§Ø³ØªÙ…ØªØ¹ÙˆØ§! ğŸ‰</span></div>
      </div>
      <button class="btn btn--secondary btn--lg btn--full mt-6" onclick="App.showScreen('menuScreen')">ÙÙ‡Ù…Øª! ğŸ‘</button>
    </div>
  </div>

  <div id="lobbyScreen" class="screen">
    <div class="flex flex-col items-center gap-4 p-4">
      <div class="logo" style="transform:scale(0.6)"><span class="logo__box">Ø£Ø¨Ùˆ Ø¹Ø§Ø¨Ø¯</span><span class="logo__name">Ø¨ÙˆÙƒØ³</span></div>
      <div class="room-display"><div class="room-display__label">ÙƒÙˆØ¯ Ø§Ù„ØºØ±ÙØ©</div><div class="room-display__code" id="displayRoomCode">XXXX</div><div class="room-display__url">ğŸ“¤ Ø´Ø§Ø±Ùƒ Ø§Ù„ÙƒÙˆØ¯!</div></div>
      <div class="w-full text-center"><h3 class="text-lg font-bold mb-2">ğŸ‘¥ Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ† (<span id="playerCount">0</span>/10)</h3><div class="players-area" id="playersGrid"></div></div>
      <div id="gamesSection" class="w-full" style="display:none">
        <h3 class="text-xl font-black text-center mb-4">ğŸ® Ø§Ø®ØªØ± Ù„Ø¹Ø¨Ø©</h3>
        <div class="games-grid">
          <div class="game-card" onclick="App.selectGame('quiplash')"><div class="game-card__banner" style="background:linear-gradient(135deg,#667eea,#764ba2)"><span class="game-card__icon">âš¡</span></div><div class="game-card__content"><h4 class="game-card__title">Ø±Ø¯ Ø³Ø±ÙŠØ¹</h4><p class="game-card__desc">Ø§ÙƒØªØ¨ Ø£Ø·Ø±Ù Ø¥Ø¬Ø§Ø¨Ø© ÙˆØ®Ù„ Ø£ØµØ¯Ù‚Ø§Ø¡Ùƒ ÙŠØµÙˆØªÙˆÙ†!</p><div class="game-card__tags"><span class="game-tag">ğŸ‘¥ Ù£-Ù¨</span><span class="game-tag">ğŸ˜‚ ÙƒÙˆÙ…ÙŠØ¯ÙŠ</span></div></div></div>
          <div class="game-card" onclick="App.selectGame('guesspionage')"><div class="game-card__banner" style="background:linear-gradient(135deg,#11998e,#38ef7d)"><span class="game-card__icon">ğŸ“Š</span></div><div class="game-card__content"><h4 class="game-card__title">Ø®Ù…Ù‘Ù† Ø§Ù„Ù†Ø³Ø¨Ø©</h4><p class="game-card__desc">ÙƒÙ… Ù†Ø³Ø¨Ø© Ø§Ù„Ù†Ø§Ø³ Ø§Ù„Ù„ÙŠ ÙŠØ³ÙˆÙˆÙ† ÙƒØ°Ø§ØŸ</p><div class="game-card__tags"><span class="game-tag">ğŸ‘¥ Ù¢-Ù¨</span><span class="game-tag">ğŸ§  Ø°ÙƒØ§Ø¡</span></div></div></div>
          <div class="game-card" onclick="App.selectGame('fakinit')"><div class="game-card__banner" style="background:linear-gradient(135deg,#fa709a,#fee140)"><span class="game-card__icon">ğŸ•µï¸</span></div><div class="game-card__content"><h4 class="game-card__title">Ø§Ù„Ù…Ø²ÙŠÙ‘Ù</h4><p class="game-card__desc">ÙˆØ§Ø­Ø¯ Ù…Ø§ ÙŠØ¹Ø±Ù Ø§Ù„Ù…Ù‡Ù…Ø© - Ø§ÙƒØªØ´ÙÙˆÙ‡!</p><div class="game-card__tags"><span class="game-tag">ğŸ‘¥ Ù£-Ù¦</span><span class="game-tag">ğŸ­ ØªÙ…Ø«ÙŠÙ„</span></div></div></div>
          <div class="game-card" onclick="App.selectGame('triviamurder')"><div class="game-card__banner" style="background:linear-gradient(135deg,#434343,#000)"><span class="game-card__icon">ğŸ’€</span></div><div class="game-card__content"><h4 class="game-card__title">Ø­ÙÙ„Ø© Ø§Ù„Ù‚Ø§ØªÙ„</h4><p class="game-card__desc">Ø£Ø¬Ø¨ ØµØ­ Ø£Ùˆ Ù…Øª!</p><div class="game-card__tags"><span class="game-tag">ğŸ‘¥ Ù¡-Ù¨</span><span class="game-tag">â˜ ï¸ Ø±Ø¹Ø¨</span></div></div></div>
          <div class="game-card" onclick="App.selectGame('fibbage')"><div class="game-card__banner" style="background:linear-gradient(135deg,#f093fb,#f5576c)"><span class="game-card__icon">ğŸ­</span></div><div class="game-card__content"><h4 class="game-card__title">ÙƒØ´Ù Ø§Ù„ÙƒØ°Ø§Ø¨</h4><p class="game-card__desc">Ø§ÙƒØªØ¨ ÙƒØ°Ø¨Ø© Ù…Ù‚Ù†Ø¹Ø©!</p><div class="game-card__tags"><span class="game-tag">ğŸ‘¥ Ù¢-Ù¨</span><span class="game-tag">ğŸ¤¥ Ø®Ø¯Ø§Ø¹</span></div></div></div>
          <div class="game-card" onclick="App.selectGame('drawful')"><div class="game-card__banner" style="background:linear-gradient(135deg,#4facfe,#00f2fe)"><span class="game-card__icon">ğŸ¨</span></div><div class="game-card__content"><h4 class="game-card__title">Ø§Ø±Ø³Ù… Ù„ÙŠ</h4><p class="game-card__desc">Ø§Ø±Ø³Ù… ÙˆØ®Ù„ Ø§Ù„Ø¨Ø§Ù‚ÙŠÙ† ÙŠØ®Ù…Ù†ÙˆÙ†!</p><div class="game-card__tags"><span class="game-tag">ğŸ‘¥ Ù£-Ù¨</span><span class="game-tag">ğŸ–Œï¸ Ø±Ø³Ù…</span></div></div></div>
        </div>
      </div>
      <div id="waitingMessage" style="display:none"><p class="text-muted">â³ Ø§Ù†ØªØ¸Ø± Ø§Ù„Ù…Ø¶ÙŠÙ...</p></div>
      <div class="flex gap-3 mt-2">
        <button class="btn btn--secondary" id="readyBtn" onclick="App.toggleReady()">âœ‹ Ø¬Ø§Ù‡Ø²!</button>
        <button class="btn btn--danger" onclick="if(confirm('Ù…ØªØ£ÙƒØ¯ØŸ'))location.reload()">ğŸšª Ø®Ø±ÙˆØ¬</button>
      </div>
    </div>
  </div>

  <div id="gameScreen" class="screen">
    <div class="game-hud">
      <div class="game-hud__start"><button class="btn btn--danger btn--sm btn--icon" onclick="if(confirm('Ù…ØªØ£ÙƒØ¯ØŸ'))location.reload()">ğŸšª</button><div><div class="game-hud__title" id="gameTitle">âš¡ Ø§Ù„Ù„Ø¹Ø¨Ø©</div><div class="game-hud__round" id="gameRound">Ø§Ù„Ø¬ÙˆÙ„Ø© Ù¡ Ù…Ù† Ù£</div></div></div>
      <div class="game-hud__center"></div>
      <div class="game-hud__end"><div class="game-timer" id="gameTimer">30</div></div>
    </div>
    <div class="game-content" id="gameContent"></div>
    <div class="game-footer"><p class="game-footer__hint" id="gameHint">ğŸ’¡ Ø§ÙƒØªØ¨ Ø£Ø·Ø±Ù Ø¥Ø¬Ø§Ø¨Ø©!</p></div>
  </div>

  <div id="resultsScreen" class="screen screen--centered">
    <div id="winnerDisplay" class="text-center mb-6"></div>
    <div class="scoreboard" id="finalScoreboard"></div>
    <div class="flex justify-center gap-4 mt-6" id="resultsActions"></div>
  </div>

  <div id="toastContainer"></div>
  <script src="/js/app.js"></script>
</body>
</html>
